[
  {
    "id": "ss-dx5.8",
    "title": "Integrate Unichain (chainId: 130, ETH, OP Stack L2)",
    "description": "TVL: $95.4M | RPC: https://mainnet.unichain.org | Explorer: https://uniscan.xyz | Token Support: All | Pattern B (RPC-only) | Uniswap's L2",
    "notes": "Logo: https://assets.relay.link/icons/130/light.png (dark: dark.png)\nCoinGecko: unichain\nArch: OP Stack L2 (Uniswap)\nViem: standard OP Stack - should just work\nChecklist: [x] chain-adapters [x] caip [x] asset-service [x] feature-flag [x] plugin [x] env-config [x] icon/logo\n\n--- RELAY ACTIVATION ---\n[x] Add to chainIdToRelayChainId in packages/swapper/src/swappers/RelaySwapper/constant.ts\n[x] Add native asset case in packages/swapper/src/swappers/RelaySwapper/utils/relayTokenToAssetId.ts\n--- ASSET DATA REGEN ---\n[x] Create scripts/generateAssetData/<chainname>/index.ts\n[x] Add case to scripts/generateAssetData/coingecko.ts\n[x] Add import + getAssets call to scripts/generateAssetData/generateAssetData.ts\n[x] Run: yarn generate:asset-data\n--- DRAFT PR ---\n[x] Branch: feat/integrate-<chainname>-relay (off develop)\n[x] gh pr create --draft using .github/PULL_REQUEST_TEMPLATE.md\n[x] Fill: Description, Issue (Part of #11902), Risk (Low - behind feature flag), Testing (enable flag + verify chain + relay bridge quote), Operations (behind flag checkbox)\n[x] yarn lint --fix && yarn type-check must pass before PR",
    "status": "in-review",
    "priority": 1,
    "issue_type": "task",
    "owner": "14963751+NeOMakinG@users.noreply.github.com",
    "created_at": "2026-02-17T10:55:25Z",
    "created_by": "NeOMakinG",
    "updated_at": "2026-02-21T11:00:00Z",
    "labels": [
      "evm",
      "op-stack",
      "relay",
      "tier-1"
    ],
    "dependencies": [
      {
        "id": "ss-dx5",
        "title": "Add support for missing Relay.link EVM chains",
        "description": "Master epic tracking integration of ALL chains supported by Relay.link that ShapeShift web doesn't currently support. Enables cross-chain bridging capabilities via Relay infrastructure. See https://github.com/shapeshift/web/issues/11902 for full details. All new EVM chains will use Pattern B (RPC-only + getKnownTokens) since no ShapeShift unchained indexer infrastructure exists for these chains.",
        "notes": "=== FROM ISSUE COMMENTS ===\n\nLOGO PATTERN: https://assets.relay.link/icons/{chainId}/light.png (dark: dark.png)\n\nARCHITECTURE GROUPS:\n- OP Stack (standard): Ink, Unichain, BOB, Mode, Hemi, World Chain, Soneium, Zircuit, Lisk, Cyber, Blast, Zora, Redstone, Shape, Superseed, Manta Pacific\n- zkEVM (special handling): Scroll, zkSync Era, Linea, Polygon zkEVM, Taiko, Abstract\n- Arbitrum Orbit: ApeChain, Xai, Sanko\n- Non-ETH gas (10 chains): Mantle(MNT), Metis(METIS), Cronos(CRO), Ronin(RON), Sonic(S), Flow(FLOW), Berachain(BERA), Plume(PLUME), Story(IP), Stable(gUSDT)\n\nCRITICAL CHAINS:\n1. Celo (42220): Native token is BOTH native AND ERC20. Relay uses wrapped CELO. Check relayTransactionMetadata.assetRequiringApproval\n2. Blast (81457): Rebasing ETH from L1 staking yield. USDB also rebases. Handle in balance displays.\n3. Ethereal (5064014): NOT in viem. Needs custom chain definition.\n4. zkSync Era (324) + Abstract (2741): Type 113 (EIP-712) transactions. Use viem zksync chainConfig.\n5. Linea (59144): Custom linea_estimateGas RPC method.\n6. Sei (1329): Parallelized EVM + CosmWasm interop. CoinGecko uses sei-v2 NOT sei.\n\nCOINGECKO GOTCHAS: sei->sei-v2, plume->plume-network, zksync->zksync, metis->metis-andromeda, morph->morph-l2, gravity->gravity-alpha, boba->boba, zora->zora-network, funkichain->funki, Superposition (capital S). BOB/Zero Network have null chain_identifier. 11 chains not on CoinGecko at all.\n\nPER-CHAIN CHECKLIST: [ ] chain-adapters [ ] caip [ ] asset-service [ ] feature-flag [ ] plugin [ ] env-config [ ] icon/logo\n\n=== RELAY SWAPPER INTEGRATION (per chain) ===\n\nFILE 1: packages/swapper/src/swappers/RelaySwapper/constant.ts\n  - Add to chainIdToRelayChainId map: [newChainChainId]: <viem_chain>.id (or numeric chain ID)\n  - Import the caip chainId (e.g., scrollChainId) from @shapeshiftoss/caip\n  - Import viem chain from viem/chains (or use raw numeric ID if not in viem)\n  - The reverse map relayChainIdToChainId auto-generates via invert()\n\nFILE 2: packages/swapper/src/swappers/RelaySwapper/utils/relayTokenToAssetId.ts\n  - Add case CHAIN_REFERENCE.NewChainMainnet: with ASSET_REFERENCE.NewChain + ASSET_NAMESPACE.slip44\n\nNO CHANGES NEEDED (for EVM chains):\n  - getRelayAssetAddress.ts (uses generic isNativeEvmAsset + DEFAULT_RELAY_EVM_TOKEN_ADDRESS)\n  - getRelayDefaultUserAddress.ts (falls through to DEFAULT_RELAY_EVM_USER_ADDRESS default)\n\nUPSTREAM DEPS REQUIRED (in @shapeshiftoss packages):\n  - @shapeshiftoss/caip: export newChainChainId, CHAIN_REFERENCE.NewChainMainnet, ASSET_REFERENCE.NewChain\n  - @shapeshiftoss/types: KnownChainIds.NewChainMainnet\n  - @shapeshiftoss/chain-adapters: NewChain chain adapter class\n  - viem/chains: chain config (or custom if not in viem)\n\nRELAY API: https://api.relay.link (env: VITE_RELAY_API_URL) - no per-chain config needed\n\n=== ASSET DATA REGENERATION (per chain) ===\n\nAfter integrating each chain, run a partial assets data regen to populate the token list.\n\nFILE 1 (CREATE): scripts/generateAssetData/<chainname>/index.ts\n  Pattern (identical for all EVM chains):\n    import { <chainname>ChainId } from '@shapeshiftoss/caip'\n    import type { Asset } from '@shapeshiftoss/types'\n    import { <chainname>, unfreeze } from '@shapeshiftoss/utils'\n    import * as coingecko from '../coingecko'\n    export const getAssets = async (): Promise<Asset[]> => {\n      const assets = await coingecko.getAssets(<chainname>ChainId)\n      return [...assets, unfreeze(<chainname>)]\n    }\n\nFILE 2 (MODIFY): scripts/generateAssetData/coingecko.ts\n  - Import <chainname>ChainId from @shapeshiftoss/caip\n  - Import <chainname> native asset from @shapeshiftoss/utils\n  - Add case in the switch: case <chainname>ChainId: return { assetNamespace: ASSET_NAMESPACE.erc20, category: adapters.chainIdToCoingeckoAssetPlatform(chainId), explorer/explorerAddressLink/explorerTxLink from <chainname> utils }\n  - NOTE: chains not on CoinGecko will only have the native asset (no ERC20 token list)\n\nFILE 3 (MODIFY): scripts/generateAssetData/generateAssetData.ts\n  - Import: import * as <chainname> from './<chainname>'\n  - Call: const <chainname>Assets = await <chainname>.getAssets()\n  - Spread into unfilteredAssetData: ...<chainname>Assets\n\nCOMMAND: yarn generate:asset-data\n  This regenerates: src/generated/asset-data.json + related-asset-index + manifest + compressed assets\n\n=== DRAFT PR CREATION (final step per chain) ===\n\nAfter all code changes are complete for a chain, open a draft PR using the repo template.\n\nBRANCH NAMING: feat/integrate-<chainname>-relay (e.g. feat/integrate-scroll-relay)\n\nCOMMAND:\n  gh pr create --draft --title 'feat: integrate <ChainName> (chainId: <id>) via Relay' --body \"$(cat <<'PREOF'\n  ## Description\n\n  Add <ChainName> (chainId: <id>) as a second-class EVM chain in ShapeShift Web with Relay bridge support.\n\n  **Changes:**\n  - Plugin registration in src/plugins/<chainname>/\n  - Feature flag `<ChainName>` in preferencesSlice\n  - Relay swapper chain mapping in RelaySwapper/constant.ts\n  - Asset data generation via CoinGecko (`<coingecko_platform_id>`)\n  - Environment config for RPC URL\n\n  **Chain details:**\n  - TVL: <tvl>\n  - Native token: <token> (18 decimals)\n  - Architecture: <arch_type>\n  - RPC: <rpc_url>\n  - Explorer: <explorer_url>\n\n  ## Issue (if applicable)\n\n  Part of #11902\n\n  ## Risk\n\n  Low risk \u2014 new chain behind feature flag (`<ChainName>`), no existing functionality affected.\n\n  > New chain plugin + Relay bridge mapping. No modifications to existing chain logic.\n\n  ## Testing\n\n  ### Engineering\n\n  1. Enable feature flag: set `VITE_FEATURE_<CHAINNAME>=true` in .env\n  2. Verify chain appears in supported chains list\n  3. Verify native token balance loads (connect wallet with <token> on <ChainName>)\n  4. Verify Relay bridge quote works: bridge ETH from Ethereum \u2192 <ChainName>\n  5. Run `yarn lint --fix && yarn type-check` \u2014 must pass\n\n  ### Operations\n\n  - [x] :checkered_flag: My feature is behind a flag and doesn't require operations testing (yet)\n\n  ## Screenshots (if applicable)\n\n  N/A \u2014 chain integration, no UI changes.\n  PREOF\n  )\"\n\nNOTE: Replace all <placeholders> with actual chain values from the bead description/notes.\nNOTE: Use --draft flag to create as draft PR.\nNOTE: Branch off develop (main branch is develop, not main).",
        "status": "open",
        "priority": 0,
        "issue_type": "epic",
        "owner": "14963751+NeOMakinG@users.noreply.github.com",
        "created_at": "2026-02-17T10:55:02Z",
        "created_by": "NeOMakinG",
        "updated_at": "2026-02-17T11:21:27Z",
        "external_ref": "gh-11902",
        "dependency_type": "parent-child"
      }
    ],
    "parent": "ss-dx5"
  }
]
